# ============================================================================
# DMO Knowledge Base - Environment Configuration
# ============================================================================
# Generate secrets: openssl rand -base64 32
# Copy this file to .env and fill in actual values

# ============================================================================
# DATABASE
# ============================================================================
# MongoDB connection string
# Development: mongodb://localhost:27017/dmo-kb
# Production: mongodb+srv://username:password@cluster.mongodb.net/dmo-kb
MONGODB_URI=mongodb://localhost:27017/dmo-kb

# ============================================================================
# APPLICATION URLS
# ============================================================================
# Node environment (development|production|test)
NODE_ENV=development

# Next.js frontend URL (NEXT_PUBLIC_ = exposed to browser)
NEXT_PUBLIC_APP_URL=http://localhost:3000

# Payload CMS backend URL (NEXT_PUBLIC_ = exposed to browser)
NEXT_PUBLIC_CMS_URL=http://localhost:3001

# ============================================================================
# NEXTAUTH (Authentication)
# ============================================================================
# NextAuth base URL (must match NEXT_PUBLIC_APP_URL)
NEXTAUTH_URL=http://localhost:3000

# NextAuth secret for JWT signing (REQUIRED - generate with: openssl rand -base64 32)
NEXTAUTH_SECRET=your-nextauth-secret-here-min-32-chars

# ============================================================================
# PAYLOAD CMS
# ============================================================================
# Payload secret for CMS auth (REQUIRED - generate with: openssl rand -base64 32)
PAYLOAD_SECRET=your-payload-secret-here-min-32-chars

# ============================================================================
# DISCORD OAUTH (Optional - for Discord login)
# ============================================================================
# Discord Application Client ID (from Discord Developer Portal)
DISCORD_CLIENT_ID=your-discord-app-client-id

# Discord Application Client Secret
DISCORD_CLIENT_SECRET=your-discord-app-client-secret

# Discord Server (Guild) ID (right-click server with Developer Mode enabled)
DISCORD_GUILD_ID=your-discord-server-id

# Discord Role IDs (for automatic role syncing)
DISCORD_OWNER_ROLE_ID=your-owner-role-id
DISCORD_ADMIN_ROLE_ID=your-admin-role-id
DISCORD_EDITOR_ROLE_ID=your-editor-role-id
DISCORD_MEMBER_ROLE_ID=your-member-role-id
DISCORD_GUEST_ROLE_ID=your-guest-role-id

# ============================================================================
# EMAIL (SMTP)
# ============================================================================
# Email server configuration
# Development (Mailpit): smtp://localhost:1025
# Production (Gmail): smtp://username:password@smtp.gmail.com:587
# Production (SendGrid): smtp://apikey:YOUR_API_KEY@smtp.sendgrid.net:587
EMAIL_SERVER=smtp://localhost:1025

# From address for emails
EMAIL_FROM=noreply@dmokb.local

# Optional: Resend API Key (recommended for production)
# RESEND_API_KEY=re_your_api_key_here

# ============================================================================
# RATE LIMITING
# ============================================================================
# Maximum requests per window
RATE_LIMIT_MAX=100

# Time window in milliseconds (60000 = 1 minute)
RATE_LIMIT_WINDOW_MS=60000

# ============================================================================
# LOGGING
# ============================================================================
# Log level (debug|info|warn|error)
LOG_LEVEL=info

# ============================================================================
# SECURITY (Development)
# ============================================================================
# Auto-elevate users to editor role in development (true|false)
DEV_AUTO_ELEVATE=false

# ============================================================================
# SEARCH
# ============================================================================
# Search adapter (mongodb|algolia|meilisearch)
SEARCH_ADAPTER=mongodb

# ============================================================================
# DATA INGESTION (DMO Wiki Import)
# ============================================================================
# Official DMO site URL for patch notes/events
OFFICIAL_SITE_URL=https://dmo.gameking.com

# Throttle delay between scraping requests (milliseconds)
INGEST_THROTTLE_MS=2000

# DMO Wiki credentials (optional - for authenticated imports with better rate limits)
DMOWIKI_USERNAME=your-username
DMOWIKI_PASSWORD=your-password

# CMS Admin credentials (for bulk import scripts)
CMS_ADMIN_EMAIL=your-admin-email@example.com
CMS_ADMIN_PASSWORD=your-admin-password

# ============================================================================
# OPTIONAL: STORAGE (for production)
# ============================================================================
# Uncomment and configure for cloud storage (e.g., AWS S3, Cloudinary)

# S3 Configuration
# STORAGE_S3_BUCKET=your-bucket-name
# STORAGE_S3_REGION=us-east-1
# STORAGE_S3_ACCESS_KEY_ID=your-access-key
# STORAGE_S3_SECRET_ACCESS_KEY=your-secret-key

# Cloudinary Configuration
# CLOUDINARY_CLOUD_NAME=your-cloud-name
# CLOUDINARY_API_KEY=your-api-key
# CLOUDINARY_API_SECRET=your-api-secret

# ============================================================================
# OPTIONAL: MONITORING & ANALYTICS
# ============================================================================
# Sentry DSN for error tracking
# SENTRY_DSN=https://xxx@xxx.ingest.sentry.io/xxx

# Plausible Analytics domain
# PLAUSIBLE_DOMAIN=dmokb.info

# ============================================================================
# OPTIONAL: SEARCH (for future use)
# ============================================================================
# Algolia configuration
# ALGOLIA_APP_ID=your-app-id
# ALGOLIA_ADMIN_API_KEY=your-admin-key
# NEXT_PUBLIC_ALGOLIA_SEARCH_KEY=your-search-key

# Meilisearch configuration
# MEILISEARCH_HOST=http://localhost:7700
# MEILISEARCH_API_KEY=your-master-key
